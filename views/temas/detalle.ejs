<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles de temas</title>
</head>
<body>
    <% if (error != "") { %>
        <p style="color:red"><%= error %></p>
    <% } %>
    <% if (ok != ""){ %>
        <p style="color:chartreuse"> <%= ok %> </p>
    <%} %>
    <h1> <%= tema.titulo %> </h1>
    <p> <%= tema.descripcion %> </p>

    <h2> Enlaces </h2>
    <% if (enlaces.length > 0) { %>
        <ul id="lista-enlaces">
        <% enlaces.forEach(e => { %>
            <li class="enlace" data-id="<%= e.id %>">
                <strong class="titulo"><%= e.titulo %></strong>
                <p><a href="<%= e.url %>" target="_blank" rel="noopener noreferrer">Abrir enlace</a></p>
                <% if (e.descripcion){ %>
                    <p><%= e.descripcion %></p>
                <% } %>
                — <span class="votos">Votos: <%= e.votos %></span>
                <p><a href="/enlaces/<%= e.id %>/editar">Editar</a></p>
                <form method="POST" action="/enlaces/<%= e.id %>/votar">
                    <button type="submit" class="btn-votar-tema">Votar enlace</button>
                </form>
                <p></p>
                <form method="POST" action="/enlaces/<%= e.id %>/eliminar">
                    <button type="submit"> Eliminar </button>
                </form>
            </li>
        <% }) %>
        </ul>
        <% } else { %>
            <p>Este tema aun no tiene enlaces.</p>
        <% } %>
    <h2> Agregar enlace </h2>
    <form method="POST" action="/temas/<%= tema.id %>/enlaces">
        <input type="text" name="titulo" placeholder="Título" value="<%= form.titulo %>">
        <input type="text" name="url" placeholder="https://..." value="<%= form.url %>">
        <textarea name="descripcion" placeholder="Descripción (opcional)"><%= form.descripcion %></textarea>
        <button type="submit"> Agregar </button>
    </form>

    <!-- Botón volver -->
    <p>
    <a href="/temas">
        <button type="button">Volver al listado de temas</button>
    </a>
    </p>
</body>
</html>